{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List a New Coupon | DealSwap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
    <style>
        body { background: linear-gradient(135deg, #4361ee 0%, #9b22ea 50%, #d91baf 100%);}
        .form-card { background: white; border-radius: 20px; padding: 40px; border: none; }
        .upload-area { border: 2px dashed #e2e8f0; border-radius: 12px; padding: 30px; text-align: center; }
        .form-label { font-weight: 600; font-size: 0.9rem; color: #334155; }
        .form-control, .form-select { border-radius: 10px; padding: 10px 15px; border: 1px solid #e2e8f0; }
        .submit-btn { background: linear-gradient(90deg, #4361ee 0%, #9b22ea 100%); border: none; color: white; font-weight: 700; padding: 12px; border-radius: 10px; width: 100%; transition: opacity 0.3s; }
        .submit-btn:hover { opacity: 0.9; color: white; }
        .info-box { background-color: #eff6ff; border-left: 4px solid #3b82f6; padding: 15px; border-radius: 8px; font-size: 0.85rem; color: #1e40af; }
    </style>
</head>
<body class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="fw-bold mb-1">List a New Coupon</h2>
                <p class="text-muted mb-4">Fill in the details to list your coupon for sale</p>

                <div class="form-card shadow-sm">
                    <form action="#" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}

                        <div class="mb-4">
                            <label class="form-label">Coupon Image *</label>
                            <div class="upload-area" id="drop-zone" onclick="document.getElementById('file-input').click()">
                                <img src="https://img.icons8.com/ios/40/6366f1/upload-to-cloud--v1.png" class="mb-2">
                                <p class="mb-1 fw-bold small">Click to upload or drag and drop</p>
                                <p class="text-muted small mb-3">PNG, JPG up to 5MB</p>
                                
                                <input type="file" id="file-input" name="coupon_image" accept="image/*" style="display: none;" onchange="updateFileName(this)">
                                
                                <button type="button" class="btn btn-primary btn-sm px-4">Choose File</button>
                                
                                <p id="file-name-display" class="mt-2 small text-primary fw-bold"></p>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">Coupon Title *</label>
                            <input type="text" class="form-control" placeholder="e.g., Amazon Prime 3 Month Subscription">
                        </div>
                        <div class="mb-4">
                            <label class="form-label">Description *</label>
                            <textarea class="form-control" rows="3" placeholder="Describe what this coupon offers..."></textarea>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label class="form-label">Brand *</label>
                                <input type="text" class="form-control" placeholder="e.g., Amazon">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Category *</label>
                                <select class="form-select">
                                    <option selected>Select a category</option>
                                    <option value="electronics">Electronics</option>
                                    <option value="food">Food & Dining</option>
                                    <option value="gaming">Gaming</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-4">
                                <label class="form-label">Selling Price ($) *</label>
                                <input type="text" class="form-control" placeholder="29.99">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Original Price ($)</label>
                                <input type="text" class="form-control" placeholder="49.99">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Discount (%) *</label>
                                <input type="text" class="form-control" placeholder="40">
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label class="form-label">Coupon Code *</label>
                                <input type="text" class="form-control" placeholder="SAVE40NOW">
                                <small class="text-muted">This will be hidden until purchase</small>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Valid Until *</label>
                                <input type="date" class="form-control">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">Terms & Conditions</label>
                            <textarea class="form-control" rows="3" placeholder="Enter any terms and conditions (one per line)"></textarea>
                        </div>

                        <div class="info-box mb-4">
                            <div class="d-flex gap-2">
                                <img src="https://img.icons8.com/ios-filled/16/3b82f6/info.png">
                                <p class="m-0 fw-bold">Before you submit:</p>
                            </div>
                            <ul class="mt-2 mb-0">
                                <li>Ensure all information is accurate and up-to-date</li>
                                <li>The coupon code will be verified before approval</li>
                                <li>You'll receive 85% of the selling price (15% platform fee)</li>
                                <li>Coupons are reviewed within 24 hours</li>
                            </ul>
                        </div>

                        <div class="d-flex gap-3 mt-5">
                            <button type="submit" class="submit-btn">Submit Coupon for Review</button>
                            <a href="{% url 'home' %}" class="btn btn-outline-secondary px-4 d-flex align-items-center">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    // Displays the name of the file once chosen from the PC folder
    function updateFileName(input) {
        const display = document.getElementById('file-name-display');
        if (input.files && input.files[0]) {
            display.textContent = "Selected: " + input.files[0].name;
        }
    }

    // Optional: Add drag and drop functionality
    const dropZone = document.getElementById('drop-zone');
    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.style.borderColor = "#4361ee";
        dropZone.style.backgroundColor = "#f0f4ff";
    });

    dropZone.addEventListener('dragleave', () => {
        dropZone.style.borderColor = "#e2e8f0";
        dropZone.style.backgroundColor = "transparent";
    });

    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        const files = e.dataTransfer.files;
        document.getElementById('file-input').files = files;
        updateFileName(document.getElementById('file-input'));
    });
</script>
</html>